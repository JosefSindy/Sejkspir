const shakes = {
  sonet: {
    title: "Sonet o mangu",
    desc: "Sladk√° exotika, co tƒõ p≈ôenese na tropick√Ω ostrov.",
    ingredients: "Mango, kokosov√© ml√©ko, ananas",
    calories: "210 kcal / 100 ml",
    energy: "880 kJ",
    priceSmall: "59 Kƒç",
    priceLarge: "89 Kƒç"
  },
  ruzova: {
    title: "R≈Ø≈æov√° Julie",
    desc: "Romantick√Ω mix r≈Ø≈æ√≠ a bobul√≠ ‚Äì jemn√Ω, osvƒõ≈æuj√≠c√≠ a vo≈àav√Ω.",
    ingredients: "Jahody, maliny, r≈Ø≈æov√° voda, mandlov√© ml√©ko",
    calories: "170 kcal / 100 ml",
    energy: "710 kJ",
    priceSmall: "59 Kƒç",
    priceLarge: "89 Kƒç"
  },
  zeleny: {
    title: "Zelen√Ω princ",
    desc: "Zdrav√Ω zelen√Ω elix√≠r pln√Ω energie a vitam√≠n≈Ø.",
    ingredients: "≈†pen√°t, ban√°n, jablko, kiwi, limetka",
    calories: "190 kcal / 100 ml",
    energy: "800 kJ",
    priceSmall: "56 Kƒç",
    priceLarge: "85 Kƒç"
  },
  letni: {
    title: "Letn√≠ sen",
    desc: "Ovocn√° exploze, kter√° chutn√° jako l√©to v ka≈æd√©m dou≈°ku.",
    ingredients: "Broskev, marakuja, pomeranƒçov√Ω d≈æus",
    calories: "160 kcal / 100 ml",
    energy: "670 kJ",
    priceSmall: "59 Kƒç",
    priceLarge: "89 Kƒç"
  },
  tropic: {
    title: "Tropick√° bou≈ôe",
    desc: "Kr√©mov√Ω a v√Ω≈æivn√Ω tropick√Ω mix s chia s√≠lou.",
    ingredients: "Mango, ban√°n, kokos, ananas, chia",
    calories: "260 kcal / 100 ml",
    energy: "1090 kJ",
    priceSmall: "69 Kƒç",
    priceLarge: "95 Kƒç"
  },
  hamlet: {
    title: "Hamlet≈Øv hnƒõv",
    desc: "Intenzivn√≠ a syt√Ω shake pro skuteƒçn√© hrdiny.",
    ingredients: "ƒåokol√°da, ara≈°√≠dov√© m√°slo, protein, ovesn√© ml√©ko",
    calories: "410 kcal / 100 ml",
    energy: "1720 kJ",
    priceSmall: "69 Kƒç",
    priceLarge: "105 Kƒç"
  },
  macbeth: {
    title: "Macbeth Mass",
    desc: "Sladk√Ω a siln√Ω ‚Äì ide√°ln√≠ po tr√©ninku.",
    ingredients: "Ban√°n, datle, vanilkov√Ω protein, sko≈ôice",
    calories: "350 kcal / 100 ml",
    energy: "1470 kJ",
    priceSmall: "69 Kƒç",
    priceLarge: "105 Kƒç"
  },
  othello: {
    title: "Othell≈Øv o≈ôech",
    desc: "Kr√©mov√° ƒçokol√°dovo-o≈ô√≠≈°kov√° harmonie.",
    ingredients: "L√≠skov√Ω o≈ôech, kakao, protein, r√Ω≈æov√© ml√©ko",
    calories: "380 kcal / 100 ml",
    energy: "1590 kJ",
    priceSmall: "75 Kƒç",
    priceLarge: "109 Kƒç"
  },
  romeo: {
    title: "Romeovo r√°no",
    desc: "Sladk√© probuzen√≠ s chut√≠ prvn√≠ho pol√≠ben√≠.",
    ingredients: "Jahoda, vanilka, ≈ôeck√Ω jogurt, med",
    calories: "290 kcal / 100 ml",
    energy: "1210 kJ",
    priceSmall: "69 Kƒç",
    priceLarge: "99 Kƒç"
  },
  gain: {
    title: "Shakes-gain",
    desc: "Dezertn√≠ proteinov√° bomba, co tƒõ nakopne i potƒõ≈°√≠.",
    ingredients: "Cookies & cream protein, mandlov√© ml√©ko, ban√°n",
    calories: "360 kcal / 100 ml",
    energy: "1500 kJ",
    priceSmall: "75 Kƒç",
    priceLarge: "109 Kƒç"
  },
  sen: {
    title: "Sen noci ƒçokol√°dov√©",
    desc: "Temnƒõ ƒçokol√°dov√Ω sen s jemn√Ωm dotekem kokosu.",
    ingredients: "ƒåokol√°da, smetana, kokos",
    calories: "420 kcal / 100 ml",
    energy: "1760 kJ",
    priceSmall: "69 Kƒç",
    priceLarge: "95 Kƒç"
  },
  karamel: {
    title: "Karamelov√° trag√©die",
    desc: "H≈ôejiv√Ω a jemn√Ω shake s p≈ô√≠rodn√≠ sladkost√≠ medu.",
    ingredients: "Med, vanilka, mandle, ml√©ko",
    calories: "310 kcal / 100 ml",
    energy: "1300 kJ",
    priceSmall: "67 Kƒç",
    priceLarge: "92 Kƒç"
  },
  med: {
    title: "Medov√Ω sen",
    desc: "Zdrav√Ω zelen√Ω elix√≠r pln√Ω energie a vitam√≠n≈Ø.",
    ingredients: "≈†pen√°t, ban√°n, jablko, kiwi, limetka",
    calories: "190 kcal / 100 ml",
    energy: "800 kJ",
    priceSmall: "56 Kƒç",
    priceLarge: "85 Kƒç"
  },
  laska: {
    title: "L√°ska na prvn√≠ lok",
    desc: "Kr√©mov√Ω, sladk√Ω a nebezpeƒçnƒõ n√°vykov√Ω.",
    ingredients: "Jahody, b√≠l√° ƒçokol√°da, smetana",
    calories: "400 kcal / 100 ml",
    energy: "1670 kJ",
    priceSmall: "69 Kƒç",
    priceLarge: "95 Kƒç"
  },
  vegie: {
    title: "Veggie Verona",
    desc: "Kr√©movƒõ svƒõ≈æ√≠ smoothie pro lehk√Ω restart tƒõla.",
    ingredients: "≈†pen√°t, avok√°do, jablko, citron",
    calories: "220 kcal / 100 ml",
    energy: "920 kJ",
    priceSmall: "59 Kƒç",
    priceLarge: "89 Kƒç"
  },
  bio: {
    title: "Bio Bard",
    desc: "Antioxidaƒçn√≠ s√≠la v lahodn√©m fialov√©m kab√°tku.",
    ingredients: "Bor≈Øvky, mandlov√© ml√©ko, chia sem√≠nka",
    calories: "240 kcal / 100 ml",
    energy: "1000 kJ",
    priceSmall: "67 Kƒç",
    priceLarge: "92 Kƒç"
  },
  forest: {
    title: "Forest Flow",
    desc: "Osvƒõ≈æuj√≠c√≠ lesn√≠ chu≈• s jemnou sladkost√≠ datl√≠.",
    ingredients: "Lesn√≠ ovoce, kokosov√° voda, datle",
    calories: "200 kcal / 100 ml",
    energy: "840 kJ",
    priceSmall: "59 Kƒç",
    priceLarge: "89 Kƒç"
  },
  zen: {
    title: "Zen Shake",
    desc: "Klid v ka≈æd√©m dou≈°ku ‚Äì matcha energie a kokosov√° pohoda.",
    ingredients: "Matcha, kokos, ban√°n, mandlov√© ml√©ko",
    calories: "250 kcal / 100 ml",
    energy: "1040 kJ",
    priceSmall: "69 Kƒç",
    priceLarge: "99 Kƒç"
  }
};

// Otev≈ôen√≠ mod√°ln√≠ho okna
const modal = document.getElementById("modal");
const closeModal = document.querySelector(".close");
const detailButtons = document.querySelectorAll(".detail-btn");

detailButtons.forEach(btn => {
  btn.addEventListener("click", () => {
    const shakeType = btn.closest(".offer__item").dataset.shake;
    const shake = shakes[shakeType];

    document.getElementById("shakeTitle").textContent = shake.title;
    document.getElementById("shakeDesc").textContent = shake.desc;
    document.getElementById("shakeIngredients").textContent = shake.ingredients;
    document.getElementById("shakeCalories").textContent = shake.calories;
    document.getElementById("shakeEnergy").textContent = shake.energy;
    document.getElementById("shakePriceSmall").textContent = shake.priceSmall;
    document.getElementById("shakePriceLarge").textContent = shake.priceLarge;

    modal.style.display = "flex";
  });
});

// Zav≈ôen√≠ okna
closeModal.addEventListener("click", () => {
  modal.style.display = "none";
});

window.addEventListener("click", (e) => {
  if (e.target === modal) {
    modal.style.display = "none";
  }
});

let cart = [];
let currentShake = null;

// otev≈ôen√≠ v√Ωbƒõru velikosti
document.querySelectorAll(".order-btn").forEach(btn => {
  btn.addEventListener("click", () => {
    const shakeKey = btn.closest(".offer__item").dataset.shake;
    currentShake = shakes[shakeKey];
    const sizeModal = document.getElementById("sizeModal");
    const sizeOptions = document.getElementById("sizeOptions");
    sizeOptions.innerHTML = `
      <button data-size="0.3" data-price="${currentShake.priceSmall}">0,3 l ‚Äì ${currentShake.priceSmall} Kƒç</button>
      <button data-size="0.5" data-price="${currentShake.priceLarge}">0,5 l ‚Äì ${currentShake.priceLarge} Kƒç</button>
    `;
    sizeModal.style.display = "flex";
  });
});

document.querySelector(".close-size").onclick = () => (document.getElementById("sizeModal").style.display = "none");

// p≈ôid√°n√≠ z v√Ωbƒõru
document.getElementById("sizeOptions").addEventListener("click", e => {
  if (e.target.tagName === "BUTTON") {
    const size = e.target.dataset.size;
    const price = parseInt(e.target.dataset.price);
    const existing = cart.find(i => i.title === currentShake.title && i.size === size);
    if (existing) existing.qty++;
    else cart.push({ title: currentShake.title, size, price, qty: 1 });
    updateCartCount();
    document.getElementById("sizeModal").style.display = "none";
  }
});

// ko≈°√≠k
const cartModal = document.getElementById("cartModal");
document.getElementById("cartBtn").onclick = () => { renderCart(); cartModal.style.display = "flex"; };
document.querySelector(".close-cart").onclick = () => (cartModal.style.display = "none");

function renderCart() {
  const cartItems = document.getElementById("cartItems");
  cartItems.innerHTML = "";
  let total = 0;

  if (cart.length === 0) cartItems.innerHTML = "<p>Ko≈°√≠k je pr√°zdn√Ω.</p>";
  else cart.forEach((item, i) => {
    total += item.price * item.qty;
    cartItems.innerHTML += `
      <div class="cart-item">
        <span>${item.title} (${item.size} l)</span>
        <div>
          <button onclick="changeQty(${i}, -1)">‚àí</button>
          ${item.qty}
          <button onclick="changeQty(${i}, 1)">+</button>
          <button onclick="removeItem(${i})">üóë</button>
        </div>
      </div>`;
  });

  document.getElementById("cartTotal").textContent = "Celkem: " + total + " Kƒç";
}

function changeQty(i, d) { cart[i].qty += d; if (cart[i].qty <= 0) cart.splice(i, 1); renderCart(); updateCartCount(); }
function removeItem(i) { cart.splice(i, 1); renderCart(); updateCartCount(); }
function updateCartCount() { document.getElementById("cartCount").textContent = cart.reduce((s, i) => s + i.qty, 0); }

// odes√≠lac√≠ formul√°≈ô
document.getElementById("orderForm").addEventListener("submit", e => {
  e.preventDefault();
  if (cart.length === 0) return alert("Ko≈°√≠k je pr√°zdn√Ω!");
  alert("Dƒõkujeme! Objedn√°vka odesl√°na.");
  cart = [];
  renderCart();
  updateCartCount();
  e.target.reset();
  cartModal.style.display = "none";
});
// üß≠ P≈ôep√≠n√°n√≠ kategori√≠
const tabs = document.querySelectorAll(".tab-btn");
const items = document.querySelectorAll(".offer__item");

tabs.forEach(tab => {
  tab.addEventListener("click", () => {
    // p≈ôepne aktivn√≠ tlaƒç√≠tko
    tabs.forEach(t => t.classList.remove("active"));
    tab.classList.add("active");

    const category = tab.dataset.category;
    items.forEach(item => {
      if (item.dataset.category === category) {
        item.style.display = "block";
        item.style.opacity = "1";
      } else {
        item.style.display = "none";
        item.style.opacity = "0";
      }
    });
  });
});

// v√Ωchoz√≠ kategorie ‚Äì ovocn√©
document.querySelector('.tab-btn[data-category="ovocne"]').click();